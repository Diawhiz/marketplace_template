{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
    <h2>Checkout</h2>
    <div id="stripe-checkout"></div>
</div>
<script src="https://js.stripe.com/v3/"></script>
<script>
    const stripe = Stripe('{{ STRIPE_PUBLIC_KEY }}');
    fetch('/orders/checkout-session/{{ order.id }}/')
        .then(response => response.json())
        .then(session => {
            stripe.redirectToCheckout({ sessionId: session.id });
        });
</script>
{% endblock %}