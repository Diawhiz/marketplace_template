{% extends 'base.html' %}
{% block title %}Checkout{% endblock %}
{% block content %}
<div class="py-6">
  <h1 class="text-2xl font-bold mb-6">Checkout</h1>

  {% if cart_items and order.id %}
  <div class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
    <ul class="divide-y divide-gray-200">
      {% for item in cart_items %}
      <li class="py-2">
        <span>{{ item.product.name }} (x{{ item.quantity }})</span>
        <span class="float-right">₦{{ item.total }}</span>
      </li>
      {% endfor %}
    </ul>
    <p class="text-lg font-semibold mt-4">Subtotal: ₦{{ total_price }}</p>
    <p class="text-lg font-semibold">Tax: ₦{{ tax_amount }}</p>
    <p class="text-xl font-bold mt-2">Total: ₦{{ total_price|add:tax_amount }}</p>
    <a href="{% url 'orders:create_checkout_session' order_id=order.id %}" class="btn btn-primary">Pay Now</a>
  </div>
  {% else %}
  <p>Your cart is empty or no valid order exists. <a href="{% url 'products:product_list' %}">Browse products</a>.</p>
  {% endif %}
</div>
{% endblock %}